{"ast":null,"code":"import _slicedToArray from\"/Users/yixuanliao/sarry94118/2021/spring/02/petfinder/pet/pet2/petfindersearch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{Link,useParams,useHistory}from'react-router-dom';import movieService from\"../services/movie-service\";import{AuthContext}from\"../App\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var petFinderKey=\"IERoPwTvvsgAtqgT71P7EhCx8nLMCsx4xvvP0zywOA6eSzWWal\";var petFinderSecret=\"InqFifeZbO9QOwtLXTDQROwrzovrIbF2YfKVVl0o\";var SearchScreen=function SearchScreen(){var history=useHistory();var _useParams=useParams(),breed=_useParams.breed;var _useState=useState(breed),_useState2=_slicedToArray(_useState,2),searchTitle=_useState2[0],setSearchTitle=_useState2[1];var _useState3=useState({animals:[]}),_useState4=_slicedToArray(_useState3,2),results=_useState4[0],setResults=_useState4[1];var accessToken=useContext(AuthContext);// const [accessToken, setAccessToken] = useState(null);\nuseEffect(function(){// const fetchAccessToken = async () => {\n//     const params = new URLSearchParams();\n//     params.append(\"grant_type\", \"client_credentials\");\n//     params.append(\"client_id\", petFinderKey);\n//     params.append(\"client_secret\", petFinderSecret);\n//     const petfinderRes = await fetch(\n//         \"https://api.petfinder.com/v2/oauth2/token\",\n//         {\n//             method: \"POST\",\n//             body: params,\n//         }\n//     )\n//\n//     const json = await petfinderRes.json()\n//     console.log(json.access_token)\n//     setAccessToken(json.access_token)\n// }\n// fetchAccessToken();\nsetSearchTitle(breed);findMoviesByTitle(\"\",accessToken);console.log(accessToken);},[]);var findMoviesByTitle=function findMoviesByTitle(breed,accessToken){history.push(\"/search/\".concat(breed));movieService.findMovieByTitle(breed,accessToken).then(function(results){setResults(results);console.log(results);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-warning\",children:[\"Search Screen\",results.length]}),/*#__PURE__*/_jsx(\"input\",{value:searchTitle,onChange:function onChange(event){setSearchTitle(event.target.value);},className:\"form-control\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){findMoviesByTitle(searchTitle,accessToken);},className:\"btn btn-primary form-control btn btn-warning\",children:\"Search\"}),/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:results.animals.map(function(pet){return/*#__PURE__*/ (// <li className=\"list-group-item\">\n_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/details/\".concat(pet.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 mb-2 bg-warning text-dark\",children:[\"Dog Name: \",pet.name]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 mb-2 bg-light text-dark\",children:[\"Dog Gender: \",pet.gender]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 mb-2 bg-light text-dark\",children:[\"Age: \",pet.age]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 mb-2 bg-light text-dark\",children:[\"Description: \",pet.description]})]},pet.id));})}),JSON.stringify(results)]});};export default SearchScreen;// import React, { Component } from 'react';\n// import axios from 'axios';\n// import './search-style.css';\n//\n// axios.defaults.baseURL = 'https://api.thedogapi.com/v1';\n// axios.defaults.headers.common['x-api-key'] = '9edd9d8f-8716-4a0a-825f-cbc087d86a63';\n//\n// class SearchScreen extends Component {\n//\n//     async getBreeds() {\n//         const res = await axios('/breeds');\n//         return res.data;\n//     }\n//     async getCatsImagesByBreed(breed_id, amount) {\n//         const res = await axios('/images/search?breed_ids='+breed_id + \"&limit=\"+ amount);\n//\n//         console.table(res.data)\n//         return res.data;\n//     }\n//\n//     async loadBreedImages() {\n//         console.log('Load Breed Images:', this.state.selected_breed)\n//\n//         let breed_images = await this.getCatsImagesByBreed(this.state.selected_breed, 5)\n//\n//         this.setState({ images: breed_images });\n//     }\n//\n//     constructor(...args) {\n//\n//         super(...args);\n//         this.state = {\n//             images: [],\n//             breeds: [],\n//             selected_breed: 0\n//         };\n//\n//         this.onBreedSelectChange = this.onBreedSelectChange.bind(this);\n//     }\n//     async onBreedSelectChange(e) {\n//         console.log(\"Breed Selected. ID:\",e.target.value)\n//         await this.setState({selected_breed:e.target.value});\n//         await this.loadBreedImages();\n//     }\n//     componentDidMount() {\n//         if (this.state.breeds.length===0) {\n//             (async () => {\n//                 try {\n//                     this.setState({breeds: await this.getBreeds()});\n//                 } catch (e) {\n//                     //...handle the error...\n//                     console.error(e)\n//                 }\n//             })();\n//         }\n//     }\n//     render() {\n//         return (\n//             <div>\n//\n//                 <select value={this.state.selected_breed}\n//                         onChange={this.onBreedSelectChange}>\n//                     {this.state.breeds.map((breed) => <option key={breed.id} value={breed.id}>{breed.name}</option>)}\n//                 </select>\n//\n//                 <ul className=\"list-group\">\n//                     {this.state.images.map((image) =>\n//\n//                         <li className=\"list-group-item\" key={image.id}>\n//                             <img className=\"cat-image\" alt=\"\" src={image.url}></img>\n//                         </li>\n//                     )\n//                     }\n//\n//                     {/*{this.state.map((pet) =>*/}\n//\n//                     {/*    <li className=\"list-group-item\" key={pet.images.id}>*/}\n//                     {/*        <img className=\"cat-image\" alt=\"\" src={pet.images.url}></img>*/}\n//                     {/*    </li>*/}\n//                     {/*)*/}\n//                     {/*}*/}\n//                 </ul>\n//\n//             </div>\n//         );\n//     }\n// }\n//\n// export default SearchScreen;","map":{"version":3,"sources":["/Users/yixuanliao/sarry94118/2021/spring/02/petfinder/pet/pet2/petfindersearch/src/components/search-screen.js"],"names":["React","useState","useEffect","useContext","Link","useParams","useHistory","movieService","AuthContext","petFinderKey","petFinderSecret","SearchScreen","history","breed","searchTitle","setSearchTitle","animals","results","setResults","accessToken","findMoviesByTitle","console","log","push","findMovieByTitle","then","length","event","target","value","map","pet","id","name","gender","age","description","JSON","stringify"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react'\nimport {Link, useParams, useHistory} from 'react-router-dom'\nimport movieService from \"../services/movie-service\"\nimport {AuthContext} from \"../App\"\nconst petFinderKey = \"IERoPwTvvsgAtqgT71P7EhCx8nLMCsx4xvvP0zywOA6eSzWWal\"\nconst petFinderSecret = \"InqFifeZbO9QOwtLXTDQROwrzovrIbF2YfKVVl0o\"\n\n\nconst SearchScreen = () => {\n    const history = useHistory()\n    const {breed} = useParams();\n    const [searchTitle, setSearchTitle] = useState(breed)\n    const [results, setResults] = useState({animals: []})\n    const accessToken = useContext(AuthContext);\n    // const [accessToken, setAccessToken] = useState(null);\n\n    useEffect(() => {\n        // const fetchAccessToken = async () => {\n        //     const params = new URLSearchParams();\n        //     params.append(\"grant_type\", \"client_credentials\");\n        //     params.append(\"client_id\", petFinderKey);\n        //     params.append(\"client_secret\", petFinderSecret);\n        //     const petfinderRes = await fetch(\n        //         \"https://api.petfinder.com/v2/oauth2/token\",\n        //         {\n        //             method: \"POST\",\n        //             body: params,\n        //         }\n        //     )\n        //\n        //     const json = await petfinderRes.json()\n        //     console.log(json.access_token)\n        //     setAccessToken(json.access_token)\n        // }\n        // fetchAccessToken();\n        setSearchTitle(breed)\n        findMoviesByTitle(\"\", accessToken)\n        console.log(accessToken)\n\n    }, [])\n    const findMoviesByTitle = (breed, accessToken) => {\n        history.push(`/search/${breed}`)\n\n        movieService.findMovieByTitle(breed, accessToken)\n            .then((results) => {\n                setResults(results)\n                console.log(results)\n\n            })\n    }\n    return (\n        <div>\n            <h2 className=\"text-warning\">Search Screen{results.length}</h2>\n            <input value={searchTitle}\n                   onChange={(event) => {\n                       setSearchTitle((event.target.value))\n                   }}\n                   className=\"form-control\"/>\n            <button\n                onClick={() => {\n                    findMoviesByTitle(searchTitle, accessToken)\n                }}\n                className=\"btn btn-primary form-control btn btn-warning\">Search\n            </button>\n            <>\n                {/*{JSON.stringify(results)}*/}\n            </>\n            <br/>\n            <br/>\n            <ul className=\"list-group\">\n\n                {\n                    results.animals.map(pet =>\n                        // <li className=\"list-group-item\">\n                        <li className=\"list-group-item\" key={pet.id}>\n\n                            <Link to={`/details/${pet.id}`}>\n                                <div className=\"p-3 mb-2 bg-warning text-dark\">Dog Name: {pet.name}</div>\n                            </Link>\n                            <br/>\n                            <div className=\"p-3 mb-2 bg-light text-dark\">Dog Gender: {pet.gender}</div>\n                            <div className=\"p-3 mb-2 bg-light text-dark\">Age: {pet.age}</div>\n                            <div className=\"p-3 mb-2 bg-light text-dark\">Description: {pet.description}</div>\n                        </li>\n                    )\n                }\n\n            </ul>\n            {JSON.stringify(results)}\n            {/*<li className=\"list-group-item\">*/}\n            {/*    <Link to={`/details/dsdsd`}>*/}\n            {/*    Titanic*/}\n            {/*    </Link>*/}\n            {/*</li>*/}\n            {/*<li className=\"list-group-item\">*/}\n            {/*    Rock Star*/}\n            {/*</li>*/}\n            {/*<li className=\"list-group-item\">*/}\n            {/*    You are lover*/}\n            {/*</li>*/}\n\n        </div>\n    )\n}\n\nexport default SearchScreen\n\n\n// import React, { Component } from 'react';\n// import axios from 'axios';\n// import './search-style.css';\n//\n// axios.defaults.baseURL = 'https://api.thedogapi.com/v1';\n// axios.defaults.headers.common['x-api-key'] = '9edd9d8f-8716-4a0a-825f-cbc087d86a63';\n//\n// class SearchScreen extends Component {\n//\n//     async getBreeds() {\n//         const res = await axios('/breeds');\n//         return res.data;\n//     }\n//     async getCatsImagesByBreed(breed_id, amount) {\n//         const res = await axios('/images/search?breed_ids='+breed_id + \"&limit=\"+ amount);\n//\n//         console.table(res.data)\n//         return res.data;\n//     }\n//\n//     async loadBreedImages() {\n//         console.log('Load Breed Images:', this.state.selected_breed)\n//\n//         let breed_images = await this.getCatsImagesByBreed(this.state.selected_breed, 5)\n//\n//         this.setState({ images: breed_images });\n//     }\n//\n//     constructor(...args) {\n//\n//         super(...args);\n//         this.state = {\n//             images: [],\n//             breeds: [],\n//             selected_breed: 0\n//         };\n//\n//         this.onBreedSelectChange = this.onBreedSelectChange.bind(this);\n//     }\n//     async onBreedSelectChange(e) {\n//         console.log(\"Breed Selected. ID:\",e.target.value)\n//         await this.setState({selected_breed:e.target.value});\n//         await this.loadBreedImages();\n//     }\n//     componentDidMount() {\n//         if (this.state.breeds.length===0) {\n//             (async () => {\n//                 try {\n//                     this.setState({breeds: await this.getBreeds()});\n//                 } catch (e) {\n//                     //...handle the error...\n//                     console.error(e)\n//                 }\n//             })();\n//         }\n//     }\n//     render() {\n//         return (\n//             <div>\n//\n//                 <select value={this.state.selected_breed}\n//                         onChange={this.onBreedSelectChange}>\n//                     {this.state.breeds.map((breed) => <option key={breed.id} value={breed.id}>{breed.name}</option>)}\n//                 </select>\n//\n//                 <ul className=\"list-group\">\n//                     {this.state.images.map((image) =>\n//\n//                         <li className=\"list-group-item\" key={image.id}>\n//                             <img className=\"cat-image\" alt=\"\" src={image.url}></img>\n//                         </li>\n//                     )\n//                     }\n//\n//                     {/*{this.state.map((pet) =>*/}\n//\n//                     {/*    <li className=\"list-group-item\" key={pet.images.id}>*/}\n//                     {/*        <img className=\"cat-image\" alt=\"\" src={pet.images.url}></img>*/}\n//                     {/*    </li>*/}\n//                     {/*)*/}\n//                     {/*}*/}\n//                 </ul>\n//\n//             </div>\n//         );\n//     }\n// }\n//\n// export default SearchScreen;\n"]},"metadata":{},"sourceType":"module"}